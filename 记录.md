## 2017-08-08
准备造个小轮子，实现一个protobuf的子集。主要需求是让c#能动态实现proto，可以用于热更新。

设计思路：
1. 使用winform工具生成proto定义，省去解析proto的麻烦。
    1. 使用二进制序列化工具做文件保存，方便动态加载。
    2. 可以生成proto文件，可以交给标准的protoc编译器使用。
    3. 只生成一个文件。【这样比较简单，后续考虑支持多个文件】
2. 只使用proto2的一个子集，原则上也兼容proto3
    1. 必须提供一个package，会用作代码生成的命名空间，同时方便后续支持多个文件。
    2. enum和message的定义在一个平面层上，不存在内嵌定义。【不支持service】
    3. repeated的字段默认[packed=true]
    4. 只支持optional和repeated，方便和proto3兼容。
3. 静态代码生成
    1. 怎么简单怎么来，生成的数据兼容官方的protobuf，但是官方的protobuf的数据不一定能被正确解析，毕竟是个子集。
4. 动态代码
    1. 单独写，大致是Message元信息和Node数据信息，加上序列化函数。

### **注意**
1. proto2和proto3的数据实际是不兼容的
    1. 默认值的处理。proto3是无法区分一个值是没有设置呢，还是是默认值。为了省点空间值得吗？